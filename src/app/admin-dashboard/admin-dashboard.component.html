<app-header></app-header>

<div class="container p-0">
<div class="requests" style="padding-top: 20px; padding-left: 10px; padding-right: 10px">
  <div class="row">
    <div class="col-4">
      <mat-form-field style="height:40px; background-color: white; border-radius: 4px; padding: 5px; font-size: 12px;">
        <mat-label>Estado</mat-label>
        <mat-select [(ngModel)]="stateSelected" (valueChange)="setStateSelected($event)" style="background-color: white">
          <mat-option [value]="'ABIERTO'">ABIERTO</mat-option>
          <mat-option [value]="'APROBADO'">APROBADO</mat-option>
          <mat-option [value]="'RECHAZADO'">RECHAZADO</mat-option>
          </mat-select>
      </mat-form-field>
    </div>
  </div><br>

  <div class="row" style="height: 410px; background-image: url(assets/images/background-paginator.jpg); border-radius: 6px">
    <!--<img [hidden]="!(requestsLength == 0)" src="./assets/images/empty.png" alt="Logo" class="displayed" height="200" width="200">-->
    <div class="col-12 col-md-6 col-lg-3" style="margin-top: 10px" *ngFor="let request of $requestValues
       |async |slice:((requestPaginator.pageIndex)*requestPaginator.pageSize):((requestPaginator.pageIndex+1)*requestPaginator.pageSize)">
      <mat-card class="mat-elevation-z4" style="height: 390px; width: 250px">
        <mat-card-header>
          <mat-card-title>PEDIDO {{request.id}}</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <h4> SOLICITANTE: {{request.requester}} </h4>
          <h4> MONTO SOLICITADO: ${{request.moneyRequested}} </h4>
          <h4> FECHA: {{request.creationDate}}</h4>
          <h4> ESTADO: {{request.state}} </h4>
          <h4> ESTADO DE CUENTA: <span (click)="getFile(request.id, 'AS', request.accountStatus)" style="cursor: pointer" class="badge bg-info">{{request.accountStatus}}</span> </h4>
          <h4> RECIBO DE DEPOSITO: <span (click)="getFile(request.id, 'DR', request.depositReceipt)" style="cursor: pointer" class="badge bg-info">{{request.depositReceipt}}</span> </h4>
        </mat-card-content>
        <mat-card-actions>
          <button [hidden]="!showButtons" [disabled]="requestInProgress" mat-button class="btn btn-primary" (click)="approveMoneyRequest(request.id)">APROBAR</button>
          <button [hidden]="!showButtons" [disabled]="requestInProgress" mat-button class="btn btn-danger" (click)="rejectMoneyRequest(request.id)">RECHAZAR</button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div><br>
  <mat-paginator [showFirstLastButtons]="true" #requestPaginator
                 [length]="requestsLength"
                 [pageSize]="pageSize"
                 (page)="requestPageEvent = $event">
  </mat-paginator><br>

  <mat-progress-spinner
    [hidden]="!requestInProgress"
    class="example-margin"
    mode="indeterminate">
  </mat-progress-spinner>


<!--  <div class="content">
  <div fxLayout="row wrap" fxLayoutGap="16px grid">
    <div fxFlex="25%" *ngFor="let request of moneyRequests">
      <mat-card class="mat-elevation-z4" >
        <mat-card-header>
          <mat-card-title>PEDIDO {{request.id}} ({{request.creationDate}})</mat-card-title>
        </mat-card-header>
        &lt;!&ndash;<img [src]='image' alt="Not yet">&ndash;&gt;
        &lt;!&ndash;<img mat-card-image src="https://wallpaperaccess.com/full/4723250.jpg">&ndash;&gt;
        <mat-card-content>
          <h4> SOLICITANTE: {{request.requester}} </h4>
          <h4> MONTO SOLICITADO: ${{request.moneyRequested}} </h4>
          <h4> ESTADO: {{request.state}} </h4>
          <h4> ESTADO DE CUENTA: <div (click)="getFile(request.id, 'AS', request.accountStatus)" class="badge bg-info">{{request.accountStatus}}</div> </h4>
          <h4> RECIBO DE DEPOSITO: <div (click)="getFile(request.id, 'DR', request.depositReceipt)" class="badge bg-info">{{request.depositReceipt}}</div> </h4>
        </mat-card-content>
        <mat-card-actions>
          <button [hidden]="!showButtons" [disabled]="requestInProgress" mat-button class="btn btn-primary" (click)="approveMoneyRequest(request.id)">APROBAR</button>
          <button [hidden]="!showButtons" [disabled]="requestInProgress" mat-button class="btn btn-danger" (click)="rejectMoneyRequest(request.id)">RECHAZAR</button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
  <mat-progress-spinner
    [hidden]="!requestInProgress"
    class="example-margin"
    mode="indeterminate">
  </mat-progress-spinner>

  </div>-->

</div>
</div>

